<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../view-index.html">
<link rel="import" href="../shared-styles.html">
<link rel="import" href="../../bower_components/vaadin-grid/vaadin-grid.html">

<dom-module id="view-setup-customer">
<template>
<style include="shared-styles">

    :host {
       display: block;
      --app-grid-columns: 2;
      /* 50% the width of the item is equivalent to 2:1 aspect ratio*/
      --app-grid-item-height: 50%;
    }

    ul {
      padding: 0;
      list-style: none;
    }

      #customer-table data-table-row {
      width: 100%;
      display: flex;
      flex-direction: column;
      opacity: 1;
      cursor: pointer;
      border-bottom: 1px solid #e3e3e3;
      }

      #customer-table .index {
       margin-left: 10px;
      }

      paper-material {
        background-color: white;
        margin: 24px;
        padding: 16px;
      }

     @media (max-width: 640px) {
      :host {
        --app-grid-columns: 1;
      }
    }

     #frozen {
    height: 300px;
    }

  </style>
 <div class="card">
 <iron-ajax
      auto
      url="employees.json"
      handle-as="json"
      last-response="{{_employees}}"></iron-ajax>
      <vaadin-combo-box label="Filter by first name" items="[[_names]]" value="{{_filterValue}}"></vaadin-combo-box>
      <vaadin-grid id="grid">
        <table>
          <colgroup>
            <col name="firstName">
            <col name="lastName">
            <col name="email">
          </colgroup>
        </table>
      </vaadin-grid>
</div>

    <ul class="app-grid" has-aspect-ratio>
    <li>
     <div class="card">
      <h1>Customer Setup</h1>
    </li>
    <li>
     <div class="card">
      <h1>Customer Report</h1>
    </div>
    </li>
  </ul>
  </template>
  <script>
    Polymer({
      is: 'view-setup-customer',
      properties: {
        _names: {
          type: Array,
          value: function() {
            return ['Aiden', 'Jace', 'Michael', 'Sarah'];
          }
        },
        _employees: {
          type: Array,
          value: function() {
            return [];
          }
        },
        _filterValue: {
          type: String,
          value: ''
        }
      },

      observers: [
        '_applyFilter(_filterValue, _employees)'
      ],

      _applyFilter: function(filterValue, employees) {
        this.$.grid.items = employees.filter(function(item) {
          if (filterValue) {
            return (item.firstName.toLowerCase()).indexOf(filterValue.toLowerCase()) > -1;
          } else {
            return true;
          }
        }.bind(this));
      }
    });
  </script>
</dom-module>
